---
title: 設定方法
i18nReady: true
---
import Since from '~/components/Since.astro';



次のリファレンスはAstroでサポートされているすべての設定項目をカバーしています。Astroの設定についてもっと知りたい場合は、[Astro の設定](/ja/guides/configuring-astro/)の解説をご覧ください。

```js
// astro.config.mjs
import { defineConfig } from 'astro/config'

export default defineConfig({
  // 設定項目をこちらに記載
})
```
## トップレベルのオプション

### root

<p>

**データ型:** `string`<br />
**CLI:** `--root`<br />
**デフォルト値:** `"."` (現在の作業ディレクトリ)
</p>

このオプションはプロジェクトルート以外のディレクトリで`astro`のCLIコマンドを実行するときにのみ指定する必要があります。Astroは設定ファイルを見つける前にプロジェクトルートを知る必要があるため、通常このオプションは [Astroの設定ファイル](/ja/guides/configuring-astro/#サポートされている設定ファイルの種類)ではなくCLI経由で指定されます。

`--root: './my-project'`のように相対パスを渡した場合、Astroは現在の作業ディレクトリを起点として相対パスを解決します。

#### 例

```js
{
  root: './my-project-directory'
}
```

```bash
$ astro build --root ./my-project-directory
```


### srcDir

<p>

**データ型:** `string`<br />
**デフォルト値:** `"./src"`
</p>

Astroがサイトを読み込むディレクトリを設定します。

ファイルシステムの絶対パスかプロジェクトルートからの相対パスのどちらかを指定します。

```js
{
  srcDir: './www'
}
```


### publicDir

<p>

**データ型:** `string`<br />
**デフォルト値:** `"./public"`
</p>

静的アセットを置くディレクトリを設定します。このディレクトリのファイルは開発環境では`/`で配信され、ビルド時にはビルド用のディレクトリにコピーされます。これらのファイルは変換、バンドルされることはなく、常にそのままの状態で配信、コピーされます。

ファイルシステムの絶対パスかプロジェクトルートからの相対パスのどちらかを指定します。

```js
{
  publicDir: './my-custom-publicDir-directory'
}
```


### outDir

<p>

**データ型:** `string`<br />
**デフォルト値:** `"./dist"`
</p>

`astro build`コマンドがビルドの最終成果物を出力するディレクトリを設定します。

ファイルシステムの絶対パスかプロジェクトルートからの相対パスのどちらかを指定します。

```js
{
  outDir: './my-custom-build-directory'
}
```


### cacheDir

<p>

**データ型:** `string`<br />
**デフォルト値:** `"./node_modules/.astro"`
</p>

ビルド成果物をキャッシュするディレクトリを設定します。このディレクトリのファイルは、ビルド時間を短縮するために以降のビルドで使用されます。

ファイルシステムの絶対パスかプロジェクトルートからの相対パスのどちらかを指定します。

```js
{
  cacheDir: './my-custom-cache-directory'
}
```


### redirects

<p>

**データ型:** `Record.<string, RedirectConfig>`<br />
**デフォルト値:** `{}`<br />
<Since v="2.9.0" />
</p>

リダイレクトのマッピングを指定します。マッチするルートをキーに、リダイレクト先のパスを値にします。

動的ルートと静的ルートの両方をリダイレクトできますが、同じ種類のルートにのみリダイレクトできます。たとえば、`'/article': '/blog/[...slug]'` のようなリダイレクトはできません。


```js
{
  redirects: {
    '/old': '/new',
    '/blog/[...slug]': '/articles/[...slug]',
  }
}
```


アダプターをインストールせずに静的に生成されたサイトでは、[`<meta http-equiv="refresh">`タグ](https://developer.mozilla.org/ja/docs/Web/HTML/Element/meta#http-equiv)によるクライアントリダイレクトを生成し、ステータスコードはサポートされません。

SSRの使用時か、`output: static`モードで静的アダプターを使用している場合は、ステータスコードがサポートされます。AstroはリダイレクトされるGETリクエストにはステータスコード`301`を、その他のリクエストメソッドにはステータスコード`308`を使用します。

[リダイレクトのステータスコード](https://developer.mozilla.org/ja/docs/Web/HTTP/Status#redirection_messages)は、リダイレクトの設定でオブジェクトを使用してカスタマイズできます。

```js
{
  redirects: {
    '/other': {
      status: 302,
      destination: '/place',
    },
  }
}
```


### site

<p>

**データ型:** `string`
</p>

最終的にデプロイされるURLです。Astroはビルドの最後にサイトマップとcanonicalタグのURLを生成するためにこの完全なURLを使用します。Astroを最大限活用するためにこの値を設定することを強く推奨します。

```js
{
  site: 'https://www.my-site.dev'
}
```


### compressHTML

<p>

**データ型:** `boolean`<br />
**デフォルト値:** `true`
</p>

HTML出力をミニファイし、HTMLファイルのサイズを小さくするためのオプションです。デフォルトでは、Astroは`.astro`コンポーネントのHTMLから改行を含む空白を削除します。これは開発モードと最終ビルドの両方で発生します。HTMLの圧縮を無効にするには、`compressHTML`フラグを`false`に設定します。

```js
{
  compressHTML: false
}
```


### base

<p>

**データ型:** `string`
</p>

デプロイ先のベースパスです。Astroは、開発時と本番ビルドの両方で、このパスをページとアセットのルートとして使用します。

以下の例では、`astro dev`コマンドは`/docs`でサーバーを起動します。

```js
{
  base: '/docs'
}
```

このオプションを使用する場合、静的アセットのインポートとURLには、指定したベースをプレフィックスとして追加する必要があります。この値は`import.meta.env.BASE_URL`でアクセスできます。

`import.meta.env.BASE_URL`の値は、`trailingSlash`の設定に従います。明示的にスラッシュを含めるか、`trailingSlash: "always"`が設定されている場合は、末尾にスラッシュが含まれます。`trailingSlash: "never"`が設定されている場合は、`base`にスラッシュが含まれていても、`BASE_URL`には末尾のスラッシュが含まれません。


### TODO: trailingSlash

<p>

**データ型:** `'always' | 'never' | 'ignore'`<br />
**デフォルト値:** `'ignore'`
</p>

開発サーバーのルーティングを合わせる動作の設定をします。次のオプションから選択してください。
  - `'always'` - 末尾にスラッシュを含むURLにのみマッチする (例: "/foo/")
  - `'never'` - 末尾にスラッシュを含むURLにはマッチしない (ex: "/foo")
  - `'ignore'` - URL の末尾に "/" があるかどうかに関係なく一致する

本番用ホストが末尾のスラッシュどのように機能するか、機能しないかについて厳格な取り扱いをしている場合、この設定項目を使用してください。

末尾のスラッシュを含む、または含まない URL が開発時に動作させないようにより厳格にしたい場合はこのオプションを設定することもできます。

```js
{
  // 例: 開発時に末尾のスラッシュを必須にするdevelopment
  trailingSlash: 'always'
}
```
**こちらもご覧ください:**
- buildOptions.pageUrlFormat


### scopedStyleStrategy

<p>

**データ型:** `'where' | 'class' | 'attribute'`<br />
**デフォルト値:** `'attribute'`<br />
<Since v="2.4" />
</p>

Astroコンポーネント内のスタイルをスコープするための戦略を指定します。次のオプションから選択してください。
  - `'where'` 		- `:where`セレクターを使用し、詳細度（specificity）は増加しません。
  - `'class'` 		- クラスベースのセレクターを使用し、詳細度は1だけ増加します。
  - `'attribute'` 	- `data-`属性を使用し、詳細度は増加しません。

`'class'`を使用すると、Astroコンポーネント内の要素セレクターが（たとえばグローバルスタイルシートの）グローバルスタイルのデフォルトを上書きすることを保証できます。`'where'`を使用すると、詳細度をより細かく制御できますが、より高い詳細度のセレクター、レイヤー、その他のツールを使用して、適用されるセレクターを制御する必要があります。`'attribute'`を使用すると、要素の`class`属性を操作し、自分のスタイルロジックとAstroの適用するスタイルとの間の競合を回避する必要がある場合に便利です。


### adapter

<p>

**データ型:** `AstroIntegration`
</p>

ビルドアダプターにより、好みのサーバー、サーバーレス、エッジのホストにデプロイできます。[Netlify](/ja/guides/deploy/netlify/#adapter-for-ssredge)や[Vercel](/ja/guides/deploy/vercel/#ssrアダプター)などのファーストパーティーのアダプターをインポートし、AstroのSSRを活用しましょう。

SSRについて詳しくは[サーバーサイドレンダリングのガイド](/ja/guides/server-side-rendering/)を、ホストの完全な一覧は[デプロイのガイド](/ja/guides/deploy/)をご覧ください。

```js
import netlify from '@astrojs/netlify/functions';
{
  // 例: Netlifyのサーバーレスデプロイのためのビルド
  adapter: netlify(),
}
```
**こちらもご覧ください:**
- output


### output

<p>

**データ型:** `'static' | 'server' | 'hybrid'`<br />
**デフォルト値:** `'static'`
</p>

Specifies the output target for builds. ビルドの出力対象を指定します。

- 'static' - 静的ホストにデプロイするための静的サイトをビルドします。
- 'server' - SSR (サーバーサイドレンダリング) をサポートするホストにデプロイするためのアプリをビルドします。
- 'hybrid' - サーバーサイドレンダリングするページを一部含んだ静的サイトをビルドします。

```js
import { defineConfig } from 'astro/config';

export default defineConfig({
  output: 'static'
})
```
**こちらもご覧ください:**
- adapter


## ビルドのオプション

### build.format

<p>

**データ型:** `('file' | 'directory')`<br />
**デフォルト値:** `'directory'`
</p>

それぞれのページの出力ファイルの形式を取り扱います。
  - 'file' が指定された場合、Astro はそれぞれのページで HTML ファイルを生成します。 (例: "/foo.html")
  - 'directory' が指定された場合、Astro はそれぞれのページでネストされた `index.html` ファイル (例: "/foo/index.html") があるディレクトリを生成します。

```js
{
  build: {
    // 例: ビルドの間に `page/index.html` のかわりに `page.html` を生成します。
    format: 'file'
  }
}
```


## サーバーのオプション


`astro dev` と `astro preview` の両方で使用される、Astro の開発サーバーをカスタマイズします。

```js
{
  server: { port: 1234, host: true }
}
```

実行するコマンド ("dev", "preview") に応じて異なる設定をするために、この設定項目に関数も渡すことができます。

```js
{
  // 例: コマンドに応じてカスタマイズするためには関数の構文を使用します
  server: (command) => ({ port: command === 'dev' ? 4321 : 4000 })
}
```

### server.host

<p>

**データ型:** `string | boolean`<br />
**デフォルト値:** `false`<br />
<Since v="0.24.0" />
</p>

どのネットワーク IP アドレスでサーバーがリッスンするか設定します。(例: localhost ではない IP)
- `false` - ネットワーク IP アドレスを公開しない
- `true` - LAN やパブリックなアドレスを含むすべてのアドレスでリッスンする
- `[custom-address]` - `[custom-address]` (例: `192.168.0.1`) のネットワーク IP アドレスを公開する

### server.port

<p>

**データ型:** `number`<br />
**デフォルト値:** `4321`
</p>

ポートがリッスンするポートを設定する。

設定されたポートが使用されていた場合、Astro は自動的に次の利用可能なポート番号を試みます。

```js
{
  server: { port: 8080 }
}
```


## マークダウンのオプション

### markdown.drafts

<p>

**データ型:** `boolean`<br />
**デフォルト値:** `false`
</p>

マークダウンのドラフトページがビルドに含まれるかを制御します。

マークダウンページが frontmatter に `draft: true` を含む場合、ドラフトとみなされます。ドラフトページは開発環境 (`astro dev`) では常に含まれ、閲覧できますが、デフォルトでは最終的なビルドに含まれません。

```js
{
  markdown: {
    // 例: 最終的なビルドにドラフトをすべて含む
    drafts: true,
  }
}
```


### markdown.shikiConfig

<p>

**データ型:** `Partial<ShikiConfig>`
</p>

Shiki の設定項目です。使い方は[マークダウンの設定のドキュメント](/ja/guides/markdown-content/#shikiの設定)をご覧ください。


### markdown.syntaxHighlight

<p>

**データ型:** `'shiki' | 'prism' | false`<br />
**デフォルト値:** `shiki`
</p>

もしあれば、使用するシンタックスハイライトを設定します。
- `shiki` - [Shiki](https://github.com/shikijs/shiki) のハイライトを使用します
- `prism` - [Prism](https://prismjs.com/) のハイライトを使用します
- `false` - シンタックスハイライトを使用しません

```js
{
  markdown: {
    // 例: マークダウンで prism のシンタックスハイライトを使用するよう変更する
    syntaxHighlight: 'prism',
  }
}
```


### markdown.remarkPlugins

<p>

**データ型:** `RemarkPlugins`
</p>

どのようにマークダウンがビルドされるかをカスタマイズするために [Remark](https://github.com/remarkjs/remark) のプラグインを渡します。

**注意:** カスタムの `remarkPlugins` または `rehypePlugins` を有効にすると、Astro の [GitHub-flavored Markdown](https://github.github.com/gfm/) と [Smartypants](https://github.com/silvenon/remark-smartypants) のビルトインサポートが無効になります。必要であれば、これらのプラグインを `astro.config.mjs` ファイルに明示的に追加する必要があります。

```js
{
  markdown: {
    // 例: Astro で使用されるデフォルトの remark のプラグイン
    remarkPlugins: ['remark-gfm', 'remark-smartypants'],
  },
};
```


### markdown.rehypePlugins

<p>

**データ型:** `RehypePlugins`
</p>

どのようにマークダウンがビルドされるかをカスタマイズするために [Rehype](https://github.com/remarkjs/remark-rehype) のプラグインを渡します。

**注意:** カスタムの `remarkPlugins` または `rehypePlugins` を有効にすると、Astro の [GitHub-flavored Markdown](https://github.github.com/gfm/) と [Smartypants](https://github.com/silvenon/remark-smartypants) のビルトインサポートが無効になります。必要であれば、これらのプラグインを `astro.config.mjs` ファイルに明示的に追加する必要があります。

```js
{
  markdown: {
    // 例: Astro で使用されるデフォルトの rehype のプラグイン
    rehypePlugins: [],
  },
};
```


## アダプター

ビルドアダプターを使用して、お好きなサーバー、サーバーレス、エッジのホストにデプロイできます。[Netlify](/ja/guides/deploy/netlify/#adapter-for-ssredge) や [Vercel](/ja/guides/deploy/vercel/#ssrアダプター) などのファーストパーティーのアダプターを Astro の SSRにインポートしてください。

SSR についてより詳しく知りたい場合は[サーバーサイドレンダリングのガイド](/ja/guides/server-side-rendering/)を、ホストの完全な一覧は[デプロイのガイド](/ja/guides/deploy/)をご覧ください。

```js
import netlify from '@astrojs/netlify/functions';
{
  // 例: Netlify のサーバーレスのデプロイのためのビルド
  adapter: netlify(),
}
```


## インテグレーション

カスタムインテグレーションで Astro を拡張します。インテグレーションは、フレームワークのサポート (Solid.js など) 、新機能 (サイトマップなど) 、新しいライブラリ(Partytown や Turbolinks など) を追加するためのワンストップ・ショップです。

Astro のインテグレーションを使い始めるためには[インテグレーションガイド](/ja/guides/integrations-guide/)をご覧ください。

```js
import react from '@astrojs/react';
import tailwind from '@astrojs/tailwind';
{
  // 例: Astro に React と Tailwind のサポートを追加
  integrations: [react(), tailwind()]
}
```

## Vite

Vite に追加の設定項目を渡します。Astro が必要な高度な設定をサポートしていない場合に有用です。

`vite` に設定するオブジェクトの完全なドキュメントは [vitejs.dev](https://vitejs.dev/config/) でご覧になれます。

#### 例

```js
{
  vite: {
    ssr: {
      // 例: 必要な場合、壊れたパッケージが SSR の処理を行うのをスキップさせます
      external: ['broken-npm-package'],
    }
  }
}
```

```js
{
  vite: {
    // 例: Astro プロジェクトに直接カスタムの vite プラグインを追加する
    plugins: [myPlugin()],
  }
}
```
